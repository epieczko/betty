#!/usr/bin/env python3
"""
Tests for language.solidity

Generated by meta.skill
"""

import pytest
import sys
import os
from pathlib import Path

# Add parent directory to path
sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), "../..")))

from skills.language_solidity import language_solidity


class TestLanguageSolidity:
    """Tests for LanguageSolidity"""

    def setup_method(self):
        """Setup test fixtures"""
        self.skill = language_solidity.LanguageSolidity()

    def test_initialization(self):
        """Test skill initializes correctly"""
        assert self.skill is not None
        assert self.skill.base_dir is not None

    def test_execute_basic(self):
        """Test basic execution"""
        result = self.skill.execute()

        assert result is not None
        assert "ok" in result
        assert "status" in result

    def test_execute_success(self):
        """Test successful execution"""
        result = self.skill.execute()

        assert result["ok"] is True
        assert result["status"] == "success"

    # TODO: Add more specific tests based on skill functionality


def test_cli_help(capsys):
    """Test CLI help message"""
    sys.argv = ["language_solidity.py", "--help"]

    with pytest.raises(SystemExit) as exc_info:
        language_solidity.main()

    assert exc_info.value.code == 0
    captured = capsys.readouterr()
    assert "Fluency in Solidity programming language for Ether" in captured.out


if __name__ == "__main__":
    pytest.main([__file__, "-v"])
