# Betty Repository Taxonomy

Complete catalog and analysis of all Betty Framework components.

## Overview

This directory contains a comprehensive catalog of all Betty components including skills, agents, hooks, commands, and artifact types. The catalogs were generated by analyzing all manifests and configuration files across the repository.

## Generated Files

### Catalogs (JSON)

| File | Description | Components |
|------|-------------|------------|
| `component_registry.json` | Master registry of all components | 82 total |
| `skills_catalog.json` | All skill manifests | 49 skills |
| `agents_catalog.json` | All agent manifests | 20 agents |
| `hooks_catalog.json` | All Claude Code hooks | 3 hooks |
| `commands_catalog.json` | All slash commands | 10 commands |
| `artifact_types_catalog.json` | All artifact type definitions | 409 types |

### Analysis Files (JSON)

| File | Description |
|------|-------------|
| `relationships.json` | Component dependencies and connections |
| `category_matrix.json` | Components grouped by domain |
| `gaps.json` | Identified gaps and missing components |

### Documentation (Markdown)

| File | Purpose |
|------|---------|
| `catalog.md` | Browsable catalog grouped by domain and role |
| `taxonomy.md` | Taxonomy specification and naming standards |
| `relationships.md` | Component relationships with diagrams |
| `gaps.md` | Gap analysis report |
| `implementation_blueprint.md` | Prioritized roadmap for missing components |

## Key Metrics

### Component Counts

- **Skills**: 49 (reusable capabilities)
- **Agents**: 20 (autonomous AI agents)
- **Hooks**: 3 (event-driven automations)
- **Commands**: 10 (slash commands)
- **Artifact Types**: 409 (document/deliverable types)

### Relationships Mapped

- **Skill → Agent**: 54 relationships
- **Artifact Producers**: 75 mapped
- **Artifact Consumers**: 52 mapped
- **Hook → Command**: 3 mapped

## Canonical Domains

All components are organized into 10 canonical domains:

1. **architecture** - System design, artifacts, epics, stories
2. **api** - API design, validation, compatibility
3. **data** - Data transformation and validation
4. **security** - Security architecture and compliance
5. **testing** - Test engineering and validation
6. **deployment** - Plugin publishing and distribution
7. **governance** - Policy enforcement and registry management
8. **docs** - Documentation generation and validation
9. **operations** - Workflows, git operations, builds
10. **ai** - Meta-agents and AI-powered generation

## Functional Roles

Components are assigned one of 7 functional roles:

1. **create** - Generate new artifacts or components
2. **validate** - Check correctness and compliance
3. **review** - Quality assessment and auditing
4. **analyze** - Investigation and comparison
5. **orchestrate** - Workflow coordination
6. **govern** - Policy and standards enforcement
7. **observe** - Monitoring and telemetry

## Gap Analysis Summary

### Missing Orchestrators

The following domains lack orchestrator agents:
- api
- data
- security
- testing
- operations
- ai

### Naming Violations

3 components don't follow naming conventions:
- Hook naming patterns (on_/pre_/post_ prefix)

### Missing Producers/Consumers

- 19 artifact types have no producing skills (from sample of 20)
- 19 artifact types have no consuming skills (from sample of 20)

*Note: Only first 20 artifact types were sampled for producer/consumer gap analysis*

## Naming Standards

### Skills
- Format: `domain.action`
- Examples: `api.validate`, `docs.sync.readme`, `artifact.create`

### Agents
- Format: `domain.role`
- Examples: `api.analyzer`, `security.architect`, `meta.agent`

### Hooks
- Format: `on_<event>__<target>` or `pre_/post_<event>`
- Examples: `on_commit__policy-enforce`, `pre_tool_call__validation`

### Commands
- Format: `/domain-action`
- Examples: `/api-validate`, `/create-pr`, `/optimize-build`

## Usage

### Querying the Catalog

```bash
# Find all skills in a domain
jq '.[] | select(.type=="skill" and .domain=="api")' component_registry.json

# Find all agents with orchestrate role
jq '.[] | select(.type=="agent" and .role=="orchestrate")' component_registry.json

# List all artifact producers for a type
jq '.artifact_producers["api-spec"]' relationships.json
```

### Viewing Relationships

See `relationships.md` for visual Mermaid diagrams showing:
- Which skills are used by which agents
- Which hooks trigger which commands
- Artifact producer/consumer chains

## Generation

This catalog is generated by `scripts/generate_catalog.py` which:

1. Scans all `**/skill.yaml` files
2. Scans all `**/agent.yaml` files
3. Parses `.claude/hooks.yaml`
4. Reads `.claude/commands/*.md`
5. Loads `registry/artifact_types.json`
6. Normalizes and assigns domains/roles
7. Maps relationships and dependencies
8. Detects gaps and violations
9. Generates comprehensive documentation

To regenerate the catalog:

```bash
python3 scripts/generate_catalog.py
```

## Next Steps

See `implementation_blueprint.md` for prioritized roadmap of:
- Missing orchestrator agents (high priority)
- Naming convention fixes (medium priority)
- Missing artifact producers/consumers (low priority)

---

*Generated: 2025-10-26*
*Betty Framework Repository Catalog v1.0*
