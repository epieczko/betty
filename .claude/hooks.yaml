hooks:
- name: performance-monitor-pre
  event: before-tool-call
  command: echo "$(date +%s.%N),$(ps -o %cpu= -p $$),$(ps -o rss= -p $$),$CLAUDE_TOOL_NAME,start"
    >> ~/.claude/performance.csv
  description: Monitor system performance - track CPU, memory usage at tool start
  enabled: true
  timeout: 5000
- name: performance-monitor-post
  event: after-tool-call
  command: echo "$(date +%s.%N),$(ps -o %cpu= -p $$),$(ps -o rss= -p $$),$CLAUDE_TOOL_NAME,end"
    >> ~/.claude/performance.csv; if [[ $(wc -l < ~/.claude/performance.csv) -gt 1000
    ]]; then tail -n 500 ~/.claude/performance.csv > ~/.claude/performance.csv.tmp
    && mv ~/.claude/performance.csv.tmp ~/.claude/performance.csv; fi
  description: Monitor system performance - track CPU, memory usage at tool end and
    rotate logs
  enabled: true
  timeout: 5000
