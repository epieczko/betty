{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://betty-framework.dev/schemas/validation-report.json",
  "title": "Validation Report Artifact",
  "description": "Schema for validation reports produced by Betty validation skills",
  "type": "object",
  "required": ["artifact", "artifact_type", "valid", "validated_at"],
  "properties": {
    "artifact": {
      "type": "string",
      "description": "Path to the artifact that was validated"
    },
    "artifact_type": {
      "type": "string",
      "description": "Type of artifact validated (e.g., openapi-spec, workflow-definition)"
    },
    "valid": {
      "type": "boolean",
      "description": "Whether the artifact passed validation"
    },
    "errors": {
      "type": "array",
      "description": "Critical errors that caused validation to fail",
      "items": {
        "type": "object",
        "required": ["rule", "message"],
        "properties": {
          "rule": {
            "type": "string",
            "description": "Validation rule identifier"
          },
          "severity": {
            "type": "string",
            "enum": ["error", "warning", "info"],
            "default": "error"
          },
          "message": {
            "type": "string",
            "description": "Human-readable error message"
          },
          "location": {
            "type": "string",
            "description": "Location in the artifact (e.g., JSON path, line number)"
          },
          "suggestion": {
            "type": "string",
            "description": "Suggested fix for the error"
          }
        }
      }
    },
    "warnings": {
      "type": "array",
      "description": "Non-critical warnings",
      "items": {
        "type": "object",
        "required": ["rule", "message"],
        "properties": {
          "rule": {"type": "string"},
          "severity": {
            "type": "string",
            "enum": ["warning", "info"],
            "default": "warning"
          },
          "message": {"type": "string"},
          "location": {"type": "string"},
          "suggestion": {"type": "string"}
        }
      }
    },
    "info": {
      "type": "array",
      "description": "Informational messages",
      "items": {
        "type": "object",
        "properties": {
          "message": {"type": "string"}
        }
      }
    },
    "guideline": {
      "type": "string",
      "description": "Guideline or ruleset used for validation (e.g., zalando, google, microsoft)"
    },
    "guideline_version": {
      "type": "string",
      "description": "Version of the guideline used"
    },
    "validator": {
      "type": "string",
      "description": "Name of the skill that performed validation"
    },
    "validator_version": {
      "type": "string",
      "description": "Version of the validator skill"
    },
    "validated_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of when validation occurred"
    },
    "summary": {
      "type": "object",
      "description": "Summary statistics",
      "properties": {
        "total_errors": {"type": "integer", "minimum": 0},
        "total_warnings": {"type": "integer", "minimum": 0},
        "total_info": {"type": "integer", "minimum": 0},
        "rules_checked": {"type": "integer", "minimum": 0}
      }
    }
  }
}
